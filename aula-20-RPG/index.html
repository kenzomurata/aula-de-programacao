<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      var player = {
        nome: "",
        equipamentos: [],
        item: [],
      };

      var equipamentosDisponiveis = [
        { id: 1, nome: "Espada" },
        { id: 2, nome: "Arco e Flecha" },
        { id: 3, nome: "Armadura" },
        { id: 4, nome: "Lança" },
      ];

      var msgHistoria1 = function (nome) {
        return `${nome} começa sua jornada em direção a "Terra Prometida", mas para chegar lá precisa atravessar o "Deserto dos Mortos". Chegando no deserto, ${nome} se depara com dois caminhos...\n`;
      };

      var caminhosHistoria1 = [
        { id: 1, caminho: "Templo Antigo, emandando uma intensa magia" },
        { id: 2, caminho: "Caverna Subterrânea, emanando uma energia ardente" },
      ];

      var MSG_EQUIPAMENTO1 = function (ordem) {
        return `Escolha o número do seu ${ordem}° equipamento:\n`;
      };

      function removerEquipamento(escolha) {
        equipamentosDisponiveis = equipamentosDisponiveis.filter(function (
          equipamento
        ) {
          return escolha != equipamento.id;
        });
      }

      function montarFrase(fraseInicial, equipamentos) {
        var frase = fraseInicial;
        for (var indice = 0; indice < equipamentos.length; indice += 1) {
          frase = frase.concat(
            equipamentos[indice].id + "- " + equipamentos[indice].nome + "\n"
          );
        }
        return frase;
      }

      function escolherArmas(player) {
        while (player.equipamentos.length < 2) {
          var escolha = window.prompt(
            montarFrase(
              MSG_EQUIPAMENTO1(player.equipamentos.length + 1),
              equipamentosDisponiveis
            )
          );
          var ehEquipamentoValido = equipamentosDisponiveis.some(function (
            equipamento
          ) {
            return equipamento.id == escolha;
          });

          if (ehEquipamentoValido) {
            var equipEscolhido = equipamentosDisponiveis.find(function (equip) {
              return escolha == equip.id;
            });

            player.equipamentos.push(equipEscolhido);
            removerEquipamento(escolha);
          }
        }
      }

      function montarHistoria1(fraseHistoria, caminhos) {
        var frase = fraseHistoria;
        for (var indice = 0; indice < caminhos.length; indice += 1) {
          frase = frase.concat(
            caminhos[indice].id + "- " + caminhos[indice].caminho + "\n"
          );
        }
        return frase;
      }

      while (player.nome == "") {
        player.nome = window.prompt("Escolha seu nome:");
      }

      escolherArmas(player);

      console.log(player);

      while (player.equipamentos.length == 2) {
        var caminhoEscolhido1 = window.prompt(
          montarHistoria1(msgHistoria1(player.nome), caminhosHistoria1)
        );
      }
    </script>
  </body>
</html>
