<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      var MSG_EQUIPAMENTO1 = "Escolha o número do seu 1º equipamento:\n";
      var MSG_EQUIPAMENTO2 = "Agora, o número do seu 2º equipamento:\n";

      var equipamentos = [
        { id: 1, nome: "Espada" },
        { id: 2, nome: "Arco e Flecha" },
        { id: 3, nome: "Armadura" },
        { id: 4, nome: "Lança" },
      ];

      function montarFrase(fraseInicial, equipamentos) {
        var frase = fraseInicial;
        for (var indice = 0; indice < equipamentos.length; indice += 1) {
          frase = frase.concat(
            equipamentos[indice].id + "- " + equipamentos[indice].nome + "\n"
          );
          console.log("aqui");
        }
        return frase;
      }

      var player = {
        nome: "",
        equipamentos: [],
        item: "",
      };

      function weapons(equipA, equipB) {
        var equips = [];

        var equip1 = "Espada";
        var equip2 = "Arco e Flecha";
        var equip3 = "Armadura";
        var equip4 = "Lança";

        if ((equipA == 1 && equipB == 2) || (equipA == 2 && equipB == 1)) {
          equips.push(equip1);
          equips.push(equip2);
          return equips;
        }
        if ((equipA == 1 && equipB == 3) || (equipA == 3 && equipB == 1)) {
          equips.push(equip1);
          equips.push(equip3);
          return equips;
        }
        if ((equipA == 1 && equipB == 4) || (equipA == 4 && equipB == 1)) {
          equips.push(equip1);
          equips.push(equip4);
          return equips;
        }
        if ((equipA == 2 && equipB == 3) || (equipA == 3 && equipB == 2)) {
          equips.push(equip2);
          equips.push(equip3);
          return equips;
        }
        if ((equipA == 2 && equipB == 4) || (equipA == 4 && equipB == 2)) {
          equips.push(equip2);
          equips.push(equip4);
          return equips;
        }
        if ((equipA == 3 && equipB == 4) || (equipA == 4 && equipB == 3)) {
          equips.push(equip3);
          equips.push(equip4);
          return equips;
        }

        return equips;
      }

      function escolherArmas(equipamentosPlayer) {
        var segundoEquipamento = "";

        while (player.equipamentos.length == 0) {
          var escolha = window.prompt(
            montarFrase(MSG_EQUIPAMENTO1, equipamentos)
          );

          var ehEquipamentoValido = equipamentos.some(function (equipamento) {
            return equipamento.id == escolha;
          });

          if (ehEquipamentoValido) {
            var equipEscolhido = equipamentos.find(function (equip) {
              return escolha == equip.id;
            });
            player.equipamentos.push(equipEscolhido);
          }
        }

        while (segundoEquipamento == "") {
          var escolha = window.prompt(MSG_EQUIPAMENTO2);
          if (escolha == 1 || escolha == 2 || escolha == 3 || escolha == 4) {
            segundoEquipamento = escolha;
          }
        }

        equipamentosPlayer = weapons(primeiroEquipamento, segundoEquipamento);

        return equipamentosPlayer;
      }

      while (player.nome == "") {
        player.nome = window.prompt("Escolha seu nome:");
      }

      player.equipamentos = escolherArmas();

      console.log(player);
    </script>
  </body>
</html>
