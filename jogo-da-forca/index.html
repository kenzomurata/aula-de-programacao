<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./styles.css">
</head>

<body>
    <div class="conteiner">

        <div class="title">
            Hangman
        </div>

        <br>
        <br>
        <br>
        <br>

        <div class="conteinerJogo">

            <div id="conteinerPalavra">

                
                
                
            </div>    
            <img src="ingame-inicio.png" class="img">



        </div>

        <br>
        <br>
        <div class="conteinerInput">

            <div class="input">
                
                <input type="text" id="filtro" class="chute" name="chute" placeholder="?">
                
                <button id="button">Conferir</button>
                
            </div>
            
        </div>
    </div>

    <script>    
    
        function criarCaixaLetra(letra){

            var caixa =  window.document.createElement("div")
            
            caixa.classList.add("caixaLetra")

            var caixaLetra = window.document.createElement("div")

            caixaLetra.classList.add("hidden")
            
            caixaLetra.innerHTML = letra

            caixa.appendChild(caixaLetra)

            var conteinerPalavra = document.getElementById("conteinerPalavra")
            
            conteinerPalavra.appendChild(caixa)

        }


        
        function criarCaixaEspaco(espaco){

            var espaco = window.document.createElement("div")

            espaco.classList.add("caixaEspaco")

            conteinerPalavra.appendChild(espaco)

        }



        function apresentarPalavra (palavra){  
            
            var letrasSeparadas = palavra.split("")

            for(var indice = 0; indice < letrasSeparadas.length; indice += 1){

                var letra = letrasSeparadas[indice]

                if (letra != " "){
                    var conteinerPalavra = document.getElementById("conteinerPalavra")
                    //conteinerPalavra.innerHTML = ""

                    criarCaixaLetra(letra)
                }
                if (letra == " "){
                    criarCaixaEspaco(letra)
                }

            }
        }


        
        var palavra = "";

        while (palavra == ""){
            palavra = window.prompt("Digite a palavra desejada")
        }
        
        apresentarPalavra(palavra)



        function posicoesLetrasNaPalavra(palavra, letra){

            var posicoesDaLetra = []

            for(var indice = 0; indice < palavra.length; indice += 1){
                if (palavra.charAt(indice) == letra){

                    posicoesDaLetra.push(indice)

                }
            }
            return posicoesDaLetra

        }


        var erros = 0

        function revelarLetra(letra){
            
            var vezesReveladas = 0

            var caixasLetra = window.document.getElementsByClassName("caixaLetra")

            for(var indice = 0; indice < caixasLetra.length; indice += 1){
                if(caixasLetra[indice].children[0].innerHTML == letra){
                    caixasLetra[indice].children[0].classList.remove("hidden")
                    vezesReveladas += 1
                }
            }
            return vezesReveladas
        }



        function executarJogada(letra){

            var vezesReveladas = revelarLetra(letra)
            
            if(vezesReveladas == 0){
                erros += 1
                imagemDoErro(erros)
            }
            
        }



        function imagemDoErro(erros){

            var imagens = window.document.getElementsByClassName("img")

            switch(erros){
                case 1: {
                    imagens[0].src="ingame-cabeca.png"
                    break
                }
                case 2: {
                    imagens[0].src="ingame-corpo.png"
                    break
                }
                case 3: {
                    imagens[0].src="ingame-1braco.png"
                    break
                }
                case 4: {
                    imagens[0].src="ingame-2bracos.png"
                    break
                }
                case 5: {
                    imagens[0].src="ingame-1perna.png"
                    break
                }
                case 6: {
                    imagens[0].src="ingame-completo.png"
                    break
                }
                default: {}
            }
        }

        function aoClicar(){
            
            var letraInput = window.document.getElementById("filtro").value
            
            executarJogada(letraInput)

        }



        var botao = window.document.getElementById("button")

        botao.addEventListener("click", aoClicar)


        /*
        1- guardar cada letra de forma separada
        2- deixar cada letra "invisivel"
        3- criar os espaÃ§os para cada letra da palavra
        4- digitar a letra certa a revela, digitar errado revela uma parte do boneco
        5- esconder o boneco na forca e revela-lo a cada erro
        */
       
    </script>

</body>

</html>